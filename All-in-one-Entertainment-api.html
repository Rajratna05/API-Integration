<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NEXUS ‚Äî Ultimate Entertainment Hub</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
/* ============================================================
   RESET
   ============================================================ */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Outfit', sans-serif;
    background-color: #07070b;
    color: #eae8e0;
    min-height: 100vh;
}

a {
    color: inherit;
    text-decoration: none;
}

img {
    display: block;
    max-width: 100%;
}

.ambient { display: none; }

/* ============================================================
   TOP NAV BAR
   ============================================================ */
.topbar {
    position: sticky;
    top: 0;
    z-index: 100;
    background-color: #0f0f16;
    border-bottom: 2px solid #2a2a3a;
}

.topbar-inner {
    max-width: 1200px;
    margin: 0 auto;
    padding: 15px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.logo {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 28px;
    color: #e8c44a;
    letter-spacing: 4px;
}

.logo span {
    color: #4a4a55;
}

.nav-scroll {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    background-color: #16161f;
    padding: 6px;
    border-radius: 30px;
}

.nav-btn {
    background: none;
    border: none;
    color: #7a7a8a;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    padding: 8px 16px;
    border-radius: 30px;
    cursor: pointer;
    font-family: 'Outfit', sans-serif;
}

.nav-btn:hover {
    color: #eae8e0;
    background-color: #1e1e2a;
}

.nav-btn.active {
    background-color: #e8c44a;
    color: #07070b;
}

.nav-btn .nb-icon {
    font-size: 14px;
}

/* ============================================================
   HERO
   ============================================================ */
.hero {
    padding: 50px 20px 30px;
    text-align: center;
}

.hero h1 {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 48px;
    letter-spacing: 3px;
    margin-bottom: 14px;
    color: #eae8e0;
}

.hero h1 .gold {
    color: #e8c44a;
}

.hero p {
    color: #7a7a8a;
    font-size: 16px;
    max-width: 560px;
    margin: 0 auto;
    line-height: 1.7;
}

/* ============================================================
   MAIN
   ============================================================ */
.main {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px 80px;
}

/* ============================================================
   PANEL SYSTEM
   ============================================================ */
.panel {
    display: none;
}

.panel.active {
    display: block;
}

/* ============================================================
   SECTION LABEL
   ============================================================ */
.sec-label {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
}

.sec-label .sl-line {
    flex: 1;
    height: 1px;
    background-color: #2a2a3a;
}

.sec-label span {
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: #4a4a55;
    white-space: nowrap;
}

/* ============================================================
   CARD
   ============================================================ */
.card {
    background-color: #0f0f16;
    border: 1px solid #2a2a3a;
    border-radius: 14px;
    overflow: hidden;
}

.card:hover {
    background-color: #16161f;
}

/* ============================================================
   CARD HEADER
   ============================================================ */
.c-head {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 18px 22px 14px;
    border-bottom: 1px solid #2a2a3a;
}

.c-head-l {
    display: flex;
    align-items: center;
    gap: 10px;
}

.c-head-l .ci {
    font-size: 22px;
}

.c-head-l h3 {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 18px;
    letter-spacing: 1px;
    color: #eae8e0;
}

.c-head-l .c-sub {
    font-size: 11px;
    color: #4a4a55;
    margin-top: 2px;
}

/* ============================================================
   REFRESH BUTTON
   ============================================================ */
.ref-btn {
    background: none;
    border: 1px solid #2a2a3a;
    color: #7a7a8a;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    padding: 7px 14px;
    border-radius: 30px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 5px;
    font-family: 'Outfit', sans-serif;
}

.ref-btn:hover {
    border-color: #e8c44a;
    color: #e8c44a;
    background-color: rgba(232, 196, 74, 0.1);
}

.ref-btn svg {
    width: 13px;
    height: 13px;
}

/* ============================================================
   LOADING BOX
   ============================================================ */
.load-box {
    padding: 50px 20px;
    text-align: center;
    color: #4a4a55;
    font-size: 13px;
}

.spn {
    width: 36px;
    height: 36px;
    margin: 0 auto 16px;
    border: 3px solid #2a2a3a;
    border-top-color: #e8c44a;
    border-radius: 50%;
    animation: spin 0.7s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* ============================================================
   ERROR BOX
   ============================================================ */
.err-box {
    margin: 20px 22px;
    background-color: rgba(255, 94, 122, 0.1);
    border: 1px solid #ff5e7a;
    color: #ff5e7a;
    padding: 16px 18px;
    border-radius: 10px;
    font-size: 14px;
}

/* ============================================================
   NEWS PANEL
   ============================================================ */
.news-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2px;
    background-color: #2a2a3a;
}

.news-grid > * {
    background-color: #0f0f16;
}

.news-featured {
    padding: 24px;
    min-height: 350px;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
}

.news-featured .nf-img {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background-size: cover;
    background-position: center;
}

.news-featured .nf-overlay {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(to top, rgba(0,0,0,0.85), transparent);
}

.news-featured .nf-content {
    position: relative;
    z-index: 1;
}

.news-featured .nf-cat {
    display: inline-block;
    background-color: #e8c44a;
    color: #07070b;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    padding: 4px 10px;
    border-radius: 20px;
    margin-bottom: 10px;
}

.news-featured .nf-title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 26px;
    color: #ffffff;
    line-height: 1.2;
    margin-bottom: 8px;
}

.news-featured .nf-meta {
    font-size: 12px;
    color: rgba(255,255,255,0.5);
}

.news-list {
    display: flex;
    flex-direction: column;
}

.news-item {
    padding: 16px 20px;
    border-bottom: 1px solid #2a2a3a;
    display: flex;
    gap: 14px;
    cursor: pointer;
}

.news-item:last-child {
    border-bottom: none;
}

.news-item:hover {
    background-color: #16161f;
}

.news-item .ni-num {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 22px;
    color: #4a4a55;
    width: 26px;
    flex-shrink: 0;
}

.news-item .ni-body {
    flex: 1;
}

.news-item .ni-title {
    font-size: 14px;
    font-weight: 600;
    color: #eae8e0;
    line-height: 1.4;
    margin-bottom: 5px;
}

.news-item:hover .ni-title {
    color: #e8c44a;
}

.news-item .ni-meta {
    font-size: 11px;
    color: #4a4a55;
}

/* ============================================================
   WEATHER PANEL
   ============================================================ */
.weather-top {
    padding: 18px 22px;
    display: flex;
    gap: 10px;
    align-items: center;
    border-bottom: 1px solid #2a2a3a;
}

.weather-top input {
    flex: 1;
    background-color: #16161f;
    border: 1px solid #2a2a3a;
    color: #eae8e0;
    font-size: 14px;
    padding: 9px 16px;
    border-radius: 30px;
    outline: none;
    font-family: 'Outfit', sans-serif;
}

.weather-top input::placeholder {
    color: #4a4a55;
}

.weather-top input:focus {
    border-color: #e8c44a;
}

.weather-search {
    background-color: #e8c44a;
    border: none;
    color: #07070b;
    font-weight: 700;
    font-size: 13px;
    text-transform: uppercase;
    padding: 9px 22px;
    border-radius: 30px;
    cursor: pointer;
    font-family: 'Outfit', sans-serif;
}

.weather-search:hover {
    background-color: #d4b33a;
}

.weather-body {
    padding: 30px 24px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 28px;
    align-items: center;
}

.w-main {
    display: flex;
    align-items: center;
    gap: 20px;
}

.w-icon {
    font-size: 64px;
}

.w-temp {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 56px;
    color: #eae8e0;
}

.w-desc {
    font-size: 15px;
    color: #7a7a8a;
    margin-top: 2px;
    text-transform: capitalize;
}

.w-loc {
    font-size: 12px;
    color: #4a4a55;
    margin-top: 4px;
}

.w-details {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.w-det-item {
    background-color: #16161f;
    border-radius: 12px;
    padding: 16px;
    text-align: center;
}

.w-det-label {
    font-size: 10px;
    color: #4a4a55;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 6px;
}

.w-det-val {
    font-size: 18px;
    font-weight: 600;
    color: #eae8e0;
}

/* ============================================================
   ANIME PANEL
   ============================================================ */
.anime-tabs {
    display: flex;
    gap: 6px;
    padding: 14px 20px;
    border-bottom: 1px solid #2a2a3a;
}

.anime-tab {
    background: none;
    border: 1px solid #2a2a3a;
    color: #7a7a8a;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    padding: 6px 14px;
    border-radius: 20px;
    cursor: pointer;
    font-family: 'Outfit', sans-serif;
}

.anime-tab:hover {
    border-color: #ff5e7a;
    color: #ff5e7a;
}

.anime-tab.active {
    background-color: #ff5e7a;
    color: #ffffff;
    border-color: #ff5e7a;
}

.anime-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    padding: 20px;
}

.anime-card {
    position: relative;
    border-radius: 12px;
    overflow: hidden;
    cursor: pointer;
    border: 1px solid #2a2a3a;
    height: 260px;
    transition: transform 0.2s ease;
}

.anime-card:hover {
    transform: translateY(-3px);
}

.anime-card img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.anime-card .ac-overlay {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(to top, rgba(0,0,0,0.8), transparent 50%);
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    padding: 14px;
}

.anime-card .ac-title {
    font-size: 13px;
    font-weight: 600;
    color: #ffffff;
    line-height: 1.3;
}

.anime-card .ac-score {
    margin-top: 5px;
    font-size: 11px;
    color: #e8c44a;
    font-weight: 600;
}

/* ============================================================
   MUSIC PANEL
   ============================================================ */
.music-search-bar {
    padding: 18px 22px;
    display: flex;
    gap: 10px;
    border-bottom: 1px solid #2a2a3a;
}

.music-search-bar input {
    flex: 1;
    background-color: #16161f;
    border: 1px solid #2a2a3a;
    color: #eae8e0;
    font-size: 14px;
    padding: 9px 16px;
    border-radius: 30px;
    outline: none;
    font-family: 'Outfit', sans-serif;
}

.music-search-bar input::placeholder {
    color: #4a4a55;
}

.music-search-bar input:focus {
    border-color: #3dd9c0;
}

.music-search-bar button {
    background-color: #3dd9c0;
    border: none;
    color: #07070b;
    font-weight: 700;
    font-size: 13px;
    text-transform: uppercase;
    padding: 9px 22px;
    border-radius: 30px;
    cursor: pointer;
    font-family: 'Outfit', sans-serif;
}

.music-search-bar button:hover {
    background-color: #36c4ac;
}

.music-results {
    padding: 16px 22px;
}

.music-item {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 14px 0;
    border-bottom: 1px solid #2a2a3a;
    transition: opacity 0.15s;
}

.music-item:last-child {
    border-bottom: none;
}

.music-item:hover {
    opacity: 0.75;
}

.music-num {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 20px;
    color: #4a4a55;
    width: 24px;
    text-align: center;
}

.music-info {
    flex: 1;
}

.music-title {
    font-size: 15px;
    font-weight: 600;
    color: #eae8e0;
    margin-bottom: 3px;
}

.music-artist {
    font-size: 12px;
    color: #4a4a55;
}

.music-tags {
    display: flex;
    gap: 5px;
    flex-wrap: wrap;
    margin-top: 6px;
}

.music-tag {
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    padding: 3px 8px;
    border-radius: 10px;
    background-color: rgba(61, 217, 192, 0.15);
    color: #3dd9c0;
}

.music-year {
    font-size: 12px;
    color: #4a4a55;
}

/* ============================================================
   TRIVIA PANEL
   ============================================================ */
.trivia-body {
    padding: 30px 24px;
}

.trivia-question {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 22px;
    color: #eae8e0;
    line-height: 1.4;
    margin-bottom: 8px;
}

.trivia-cat {
    display: inline-block;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    color: #9b6dff;
    background-color: rgba(155, 109, 255, 0.15);
    padding: 4px 12px;
    border-radius: 18px;
    margin-bottom: 22px;
}

.trivia-options {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.trivia-opt {
    background-color: #16161f;
    border: 1px solid #2a2a3a;
    color: #eae8e0;
    font-size: 14px;
    padding: 13px 18px;
    border-radius: 10px;
    cursor: pointer;
    text-align: left;
    font-family: 'Outfit', sans-serif;
    transition: border-color 0.15s, color 0.15s, background-color 0.15s;
}

.trivia-opt:hover:not(:disabled) {
    border-color: #9b6dff;
    color: #9b6dff;
    background-color: rgba(155, 109, 255, 0.1);
}

.trivia-opt.correct {
    border-color: #52e08a;
    background-color: rgba(82, 224, 138, 0.15);
    color: #52e08a;
}

.trivia-opt.wrong {
    border-color: #ff5e7a;
    background-color: rgba(255, 94, 122, 0.15);
    color: #ff5e7a;
}

.trivia-opt:disabled {
    cursor: default;
}

.trivia-result {
    margin-top: 18px;
    font-size: 14px;
    color: #7a7a8a;
    display: none;
}

.trivia-result.show {
    display: block;
}

/* ============================================================
   SPACE PANEL
   ============================================================ */
.space-list {
    padding: 0;
}

.space-item {
    display: flex;
    gap: 18px;
    padding: 18px 22px;
    border-bottom: 1px solid #2a2a3a;
    align-items: flex-start;
    transition: background-color 0.15s;
}

.space-item:last-child {
    border-bottom: none;
}

.space-item:hover {
    background-color: #16161f;
}

.space-date {
    width: 52px;
    text-align: center;
    flex-shrink: 0;
}

.space-date .sd-day {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 28px;
    color: #4fa3e8;
    line-height: 1;
}

.space-date .sd-mon {
    font-size: 10px;
    color: #4a4a55;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.space-info {
    flex: 1;
}

.space-name {
    font-size: 15px;
    font-weight: 600;
    color: #eae8e0;
    margin-bottom: 5px;
}

.space-desc {
    font-size: 13px;
    color: #7a7a8a;
    line-height: 1.5;
}

.space-status {
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    padding: 4px 10px;
    border-radius: 14px;
    flex-shrink: 0;
}

.space-status.upcoming {
    background-color: rgba(79, 163, 232, 0.15);
    color: #4fa3e8;
}

.space-status.past {
    background-color: #1e1e2a;
    color: #7a7a8a;
}

/* ============================================================
   COMICS PANEL
   ============================================================ */
.comics-search {
    padding: 18px 22px;
    display: flex;
    gap: 10px;
    border-bottom: 1px solid #2a2a3a;
}

.comics-search input {
    flex: 1;
    background-color: #16161f;
    border: 1px solid #2a2a3a;
    color: #eae8e0;
    font-size: 14px;
    padding: 9px 16px;
    border-radius: 30px;
    outline: none;
    font-family: 'Outfit', sans-serif;
}

.comics-search input::placeholder {
    color: #4a4a55;
}

.comics-search input:focus {
    border-color: #ff8c42;
}

.comics-search button {
    background-color: #ff8c42;
    border: none;
    color: #07070b;
    font-weight: 700;
    font-size: 13px;
    text-transform: uppercase;
    padding: 9px 22px;
    border-radius: 30px;
    cursor: pointer;
    font-family: 'Outfit', sans-serif;
}

.comics-search button:hover {
    background-color: #e87c35;
}

.comics-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    padding: 20px;
}

.comic-card {
    border-radius: 10px;
    overflow: hidden;
    border: 1px solid #2a2a3a;
    cursor: pointer;
    transition: transform 0.2s ease;
}

.comic-card:hover {
    transform: translateY(-3px);
}

.comic-card .cc-img {
    height: 180px;
    background-size: cover;
    background-position: center;
    background-color: #16161f;
    display: flex;
    align-items: center;
    justify-content: center;
}

.comic-card .cc-body {
    padding: 12px;
    background-color: #0f0f16;
}

.comic-card .cc-title {
    font-size: 13px;
    font-weight: 600;
    color: #eae8e0;
    line-height: 1.3;
    margin-bottom: 4px;
}

.comic-card .cc-year {
    font-size: 11px;
    color: #4a4a55;
}

/* ============================================================
   RESPONSIVE
   ============================================================ */
@media (max-width: 768px) {
    .topbar-inner {
        flex-direction: column;
        gap: 10px;
        padding: 14px 16px;
    }

    .hero h1 {
        font-size: 34px;
    }

    .news-grid {
        grid-template-columns: 1fr;
    }

    .weather-body {
        grid-template-columns: 1fr;
        text-align: center;
    }

    .w-main {
        flex-direction: column;
        gap: 10px;
    }

    .anime-grid {
        grid-template-columns: repeat(3, 1fr);
    }

    .comics-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

@media (max-width: 480px) {
    .hero h1 {
        font-size: 28px;
    }

    .anime-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        padding: 12px;
    }

    .comics-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        padding: 12px;
    }

    .weather-top,
    .music-search-bar,
    .comics-search {
        padding: 12px 14px;
    }

    .news-item {
        padding: 12px 14px;
    }

    .c-head {
        padding: 12px 14px;
    }
}
</style>
</head>
<body>
<div class="ambient"><div class="g1"></div><div class="g2"></div><div class="g3"></div></div>

<!-- ===== NAV ===== -->
<header class="topbar">
<div class="topbar-inner">
    <div class="logo">NEX<span>US</span></div>
    <nav class="nav-scroll">
        <button class="nav-btn active"    onclick="go('news',this)">    <span class="nb-icon">üåê</span> News</button>
        <button class="nav-btn"           onclick="go('weather',this)"> <span class="nb-icon">üå§Ô∏è</span> Weather</button>
        <button class="nav-btn"           onclick="go('anime',this)">   <span class="nb-icon">üéå</span> Anime</button>
        <button class="nav-btn"           onclick="go('music',this)">   <span class="nb-icon">üéµ</span> Music</button>
        <button class="nav-btn"           onclick="go('trivia',this)">  <span class="nb-icon">üéØ</span> Trivia</button>
        <button class="nav-btn"           onclick="go('space',this)">   <span class="nb-icon">üöÄ</span> Space</button>
        <button class="nav-btn"           onclick="go('comics',this)">  <span class="nb-icon">üìö</span> Comics</button>
    </nav>
</div>
</header>

<!-- ===== HERO ===== -->
<section class="hero">
    <h1>THE ULTIMATE<br><span class="gold">ENTERTAINMENT NEXUS</span></h1>
    <p>News ¬∑ Weather ¬∑ Anime ¬∑ Music ¬∑ Trivia ¬∑ Space ¬∑ Comics ‚Äî seven live APIs powering one seamless hub.</p>
</section>

<!-- ===== MAIN ===== -->
<main class="main">

<!-- 1. NEWS -->
<div class="panel active" id="p-news">
    <div class="sec-label"><span>Live News Headlines</span><div class="sl-line"></div></div>
    <div class="card">
        <div class="c-head">
            <div class="c-head-l"><span class="ci">üåê</span><div><h3>The Guardian</h3><div class="c-sub">Top Stories ¬∑ Live</div></div></div>
            <button class="ref-btn" onclick="fetchNews()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M23 4v6h-6M1 20v-6h6"/><path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/></svg>
                Refresh
            </button>
        </div>
        <div id="newsOut"><div class="load-box"><div class="spn"></div>Loading news‚Ä¶</div></div>
    </div>
</div>

<!-- 2. WEATHER -->
<div class="panel" id="p-weather">
    <div class="sec-label"><span>Live Weather</span><div class="sl-line"></div></div>
    <div class="card">
        <div class="c-head">
            <div class="c-head-l"><span class="ci">üå§Ô∏è</span><div><h3>Open-Meteo</h3><div class="c-sub">Search any city worldwide</div></div></div>
        </div>
        <div class="weather-top">
            <input type="text" id="cityIn" placeholder="Enter city (e.g. Tokyo, Paris, Mumbai‚Ä¶)" value="London" onkeydown="if(event.key==='Enter')fetchWeather()">
            <button class="weather-search" onclick="fetchWeather()">Search</button>
        </div>
        <div id="weatherOut"><div class="load-box"><div class="spn"></div>Loading weather‚Ä¶</div></div>
    </div>
</div>

<!-- 3. ANIME -->
<div class="panel" id="p-anime">
    <div class="sec-label"><span>Anime Discover</span><div class="sl-line"></div></div>
    <div class="card">
        <div class="c-head">
            <div class="c-head-l"><span class="ci">üéå</span><div><h3>Jikan ¬∑ MyAnimeList</h3><div class="c-sub">Browse trending & top-rated</div></div></div>
            <button class="ref-btn" onclick="fetchAnime(currentAnimeTab)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M23 4v6h-6M1 20v-6h6"/><path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/></svg>
                Refresh
            </button>
        </div>
        <div class="anime-tabs">
            <button class="anime-tab active" onclick="switchAnime('trending',this)">üî• Trending</button>
            <button class="anime-tab" onclick="switchAnime('top',this)">‚≠ê Top Rated</button>
            <button class="anime-tab" onclick="switchAnime('upcoming',this)">üìÖ Upcoming</button>
        </div>
        <div id="animeOut"><div class="load-box"><div class="spn"></div>Loading anime‚Ä¶</div></div>
    </div>
</div>

<!-- 4. MUSIC -->
<div class="panel" id="p-music">
    <div class="sec-label"><span>Music Discovery</span><div class="sl-line"></div></div>
    <div class="card">
        <div class="c-head">
            <div class="c-head-l"><span class="ci">üéµ</span><div><h3>MusicBrainz</h3><div class="c-sub">Search artists & recordings</div></div></div>
        </div>
        <div class="music-search-bar">
            <input type="text" id="musicIn" placeholder="Search artist or song (e.g. Coldplay, Billie Eilish‚Ä¶)" value="Coldplay" onkeydown="if(event.key==='Enter')fetchMusic()">
            <button onclick="fetchMusic()">Search</button>
        </div>
        <div id="musicOut"><div class="load-box"><div class="spn"></div>Loading music‚Ä¶</div></div>
    </div>
</div>

<!-- 5. TRIVIA -->
<div class="panel" id="p-trivia">
    <div class="sec-label"><span>Test Your Knowledge</span><div class="sl-line"></div></div>
    <div class="card">
        <div class="c-head">
            <div class="c-head-l"><span class="ci">üéØ</span><div><h3>Open Trivia DB</h3><div class="c-sub">Random trivia questions</div></div></div>
            <button class="ref-btn" onclick="fetchTrivia()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M23 4v6h-6M1 20v-6h6"/><path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/></svg>
                New Question
            </button>
        </div>
        <div id="triviaOut"><div class="load-box"><div class="spn"></div>Loading trivia‚Ä¶</div></div>
    </div>
</div>

<!-- 6. SPACE -->
<div class="panel" id="p-space">
    <div class="sec-label"><span>Space Launch Events</span><div class="sl-line"></div></div>
    <div class="card">
        <div class="c-head">
            <div class="c-head-l"><span class="ci">üöÄ</span><div><h3>SpaceX Launches</h3><div class="c-sub">Recent & upcoming launches</div></div></div>
            <button class="ref-btn" onclick="fetchSpace()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M23 4v6h-6M1 20v-6h6"/><path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/></svg>
                Refresh
            </button>
        </div>
        <div id="spaceOut"><div class="load-box"><div class="spn"></div>Loading space events‚Ä¶</div></div>
    </div>
</div>

<!-- 7. COMICS -->
<div class="panel" id="p-comics">
    <div class="sec-label"><span>Comic Characters</span><div class="sl-line"></div></div>
    <div class="card">
        <div class="c-head">
            <div class="c-head-l"><span class="ci">üìö</span><div><h3>Comic Archive</h3><div class="c-sub">Iconic characters & first appearances</div></div></div>
        </div>
        <div class="comics-search">
            <input type="text" id="comicIn" placeholder="Search character (e.g. Batman, Spider-Man‚Ä¶)" value="Batman" onkeydown="if(event.key==='Enter')fetchComics()">
            <button onclick="fetchComics()">Search</button>
        </div>
        <div id="comicsOut"><div class="load-box"><div class="spn"></div>Loading comics‚Ä¶</div></div>
    </div>
</div>

</main>

<script>
// ============================================================
//   PANEL ROUTER ‚Äî fixed: button passed explicitly as argument
// ============================================================
let currentAnimeTab = 'trending';
// Track which panels have been loaded to avoid re-fetching on every click
const loaded = {};

const loaders = {
    news:    fetchNews,
    weather: fetchWeather,
    anime:   () => fetchAnime(currentAnimeTab),
    music:   fetchMusic,
    trivia:  fetchTrivia,
    space:   fetchSpace,
    comics:  fetchComics
};

function go(id, btn) {
    document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    document.getElementById('p-' + id).classList.add('active');
    btn.classList.add('active');
    // Load data on first visit (or always for trivia/news which benefit from refresh)
    if (!loaded[id] || id === 'trivia') {
        loaded[id] = true;
        if (loaders[id]) loaders[id]();
    }
}

// ============================================================
//   1. NEWS ‚Äî The Guardian (free "test" key, no CORS issues)
// ============================================================
async function fetchNews() {
    const el = document.getElementById('newsOut');
    el.innerHTML = '<div class="load-box"><div class="spn"></div>Loading news‚Ä¶</div>';
    try {
        const r = await fetch(
            'https://content.guardianapis.com/search?show-fields=headline,trailText,thumbnail,byline&page-size=7&order-by=newest&api-key=test'
        );
        if (!r.ok) throw new Error(`HTTP ${r.status}`);
        const d = await r.json();
        const items = d.response.results;
        if (!items || !items.length) throw new Error('No articles returned.');
        const featured = items[0];
        const rest = items.slice(1, 7);

        const fThumb = featured.fields?.thumbnail || '';
        const fStyle = fThumb
            ? `background-image:url(${fThumb})`
            : 'background:linear-gradient(135deg,#1e1e2a,#0f0f16)';

        el.innerHTML = `<div class="news-grid">
            <a href="${featured.webUrl}" target="_blank" rel="noopener" class="news-featured">
                <div class="nf-img" style="${fStyle}"></div>
                <div class="nf-overlay"></div>
                <div class="nf-content">
                    <div class="nf-cat">${featured.sectionName || 'News'}</div>
                    <div class="nf-title">${featured.webTitle}</div>
                    <div class="nf-meta">${featured.fields?.byline || ''} ¬∑ ${new Date(featured.webPublicationDate).toLocaleDateString('en', {month:'short', day:'numeric', year:'numeric'})}</div>
                </div>
            </a>
            <div class="news-list">
                ${rest.map((a, i) => `
                <a href="${a.webUrl}" target="_blank" rel="noopener" class="news-item">
                    <div class="ni-num">${i + 1}</div>
                    <div class="ni-body">
                        <div class="ni-title">${a.webTitle}</div>
                        <div class="ni-meta">${a.sectionName || ''} ¬∑ ${new Date(a.webPublicationDate).toLocaleDateString('en', {month:'short', day:'numeric'})}</div>
                    </div>
                </a>`).join('')}
            </div>
        </div>`;
    } catch (e) {
        el.innerHTML = `<div class="err-box">‚ùå News failed to load: ${e.message}</div>`;
    }
}

// ============================================================
//   2. WEATHER ‚Äî Open-Meteo (free, no key needed)
// ============================================================
async function fetchWeather() {
    const city = document.getElementById('cityIn').value.trim();
    const el = document.getElementById('weatherOut');
    if (!city) { el.innerHTML = '<div class="err-box">Please enter a city name.</div>'; return; }
    el.innerHTML = '<div class="load-box"><div class="spn"></div>Locating‚Ä¶</div>';
    try {
        const geoRes = await fetch(
            `https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}&count=1&format=json`
        );
        if (!geoRes.ok) throw new Error(`Geocoding error ${geoRes.status}`);
        const geo = await geoRes.json();
        if (!geo.results?.length) throw new Error('City not found. Try a different spelling.');

        const { latitude: lat, longitude: lon, name, country } = geo.results[0];

        const wRes = await fetch(
            `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,relative_humidity_2m,wind_speed_10m,weather_code,apparent_temperature,surface_pressure&timezone=auto`
        );
        if (!wRes.ok) throw new Error(`Weather error ${wRes.status}`);
        const w = await wRes.json();
        const c = w.current;

        const icons = {0:'‚òÄÔ∏è',1:'üå§Ô∏è',2:'‚õÖ',3:'‚òÅÔ∏è',45:'üå´Ô∏è',48:'üå´Ô∏è',51:'üå¶Ô∏è',53:'üå¶Ô∏è',55:'üå¶Ô∏è',
            61:'üåßÔ∏è',63:'üåßÔ∏è',65:'üåßÔ∏è',71:'üå®Ô∏è',73:'üå®Ô∏è',75:'‚ùÑÔ∏è',80:'üå¶Ô∏è',81:'üå¶Ô∏è',82:'üåßÔ∏è',
            95:'‚õàÔ∏è',96:'‚õàÔ∏è',99:'‚õàÔ∏è'};
        const descs = {0:'Clear Sky',1:'Mainly Clear',2:'Partly Cloudy',3:'Overcast',45:'Foggy',
            48:'Rime Fog',51:'Light Drizzle',53:'Moderate Drizzle',55:'Dense Drizzle',61:'Slight Rain',
            63:'Moderate Rain',65:'Heavy Rain',71:'Slight Snow',73:'Moderate Snow',75:'Heavy Snow',
            80:'Rain Showers',81:'Moderate Showers',82:'Violent Showers',95:'Thunderstorm',
            96:'Thunderstorm + Hail',99:'Heavy Thunderstorm + Hail'};

        el.innerHTML = `<div class="weather-body">
            <div class="w-main">
                <div class="w-icon">${icons[c.weather_code] || 'üå§Ô∏è'}</div>
                <div>
                    <div class="w-temp">${Math.round(c.temperature_2m)}¬∞C</div>
                    <div class="w-desc">${descs[c.weather_code] || 'Unknown'}</div>
                    <div class="w-loc">üìç ${name}, ${country}</div>
                </div>
            </div>
            <div class="w-details">
                <div class="w-det-item"><div class="w-det-label">Feels Like</div><div class="w-det-val">${Math.round(c.apparent_temperature)}¬∞C</div></div>
                <div class="w-det-item"><div class="w-det-label">Humidity</div><div class="w-det-val">${c.relative_humidity_2m}%</div></div>
                <div class="w-det-item"><div class="w-det-label">Wind</div><div class="w-det-val">${c.wind_speed_10m} km/h</div></div>
                <div class="w-det-item"><div class="w-det-label">Pressure</div><div class="w-det-val">${c.surface_pressure} hPa</div></div>
            </div>
        </div>`;
    } catch (e) {
        el.innerHTML = `<div class="err-box">‚ùå ${e.message}</div>`;
    }
}

// ============================================================
//   3. ANIME ‚Äî Jikan v4 (MyAnimeList wrapper, free, no key)
//   Fixed: trending uses /top/anime?filter=airing (valid endpoint)
// ============================================================
function switchAnime(tab, btn) {
    document.querySelectorAll('.anime-tab').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    currentAnimeTab = tab;
    fetchAnime(tab);
}

async function fetchAnime(tab) {
    const el = document.getElementById('animeOut');
    el.innerHTML = '<div class="load-box"><div class="spn"></div>Loading anime‚Ä¶</div>';

    // All three use valid Jikan v4 endpoints
    const urls = {
        trending: 'https://api.jikan.moe/v4/top/anime?filter=airing&limit=12&type=tv',
        top:      'https://api.jikan.moe/v4/top/anime?limit=12&type=tv',
        upcoming: 'https://api.jikan.moe/v4/top/anime?filter=upcoming&limit=12&type=tv'
    };

    try {
        const r = await fetch(urls[tab]);
        if (!r.ok) throw new Error(`Jikan API error ${r.status}`);
        const d = await r.json();
        const list = d.data || [];
        if (!list.length) throw new Error('No anime data returned.');

        el.innerHTML = `<div class="anime-grid">
            ${list.map(a => {
                const img = a.images?.jpg?.large_image_url || a.images?.jpg?.image_url || '';
                const genres = a.genres?.map(g => g.name).slice(0, 2).join(', ') || '';
                return `<div class="anime-card">
                    ${img ? `<img src="${img}" alt="${a.title}" loading="lazy">` : '<div style="width:100%;height:100%;background:#1e1e2a;display:flex;align-items:center;justify-content:center;font-size:3rem;">üéå</div>'}
                    <div class="ac-overlay">
                        <div class="ac-title">${a.title}</div>
                        <div class="ac-score">‚≠ê ${a.score || 'N/A'}${genres ? ' ¬∑ ' + genres : ''}</div>
                    </div>
                </div>`;
            }).join('')}
        </div>`;
    } catch (e) {
        el.innerHTML = `<div class="err-box">‚ùå ${e.message}</div>`;
    }
}

// ============================================================
//   4. MUSIC ‚Äî MusicBrainz (free, no key needed)
//   Added User-Agent header required by MusicBrainz policy
// ============================================================
async function fetchMusic() {
    const q = document.getElementById('musicIn').value.trim();
    const el = document.getElementById('musicOut');
    if (!q) { el.innerHTML = '<div class="err-box">Please enter a search term.</div>'; return; }
    el.innerHTML = '<div class="load-box"><div class="spn"></div>Searching‚Ä¶</div>';
    try {
        const r = await fetch(
            `https://musicbrainz.org/ws/2/recording?query=${encodeURIComponent(q)}&limit=10&fmt=json`,
            { headers: { 'User-Agent': 'NexusApp/1.0 (entertainment-hub)' } }
        );
        if (!r.ok) throw new Error(`MusicBrainz error ${r.status}`);
        const d = await r.json();
        const recordings = d.recordings || [];
        if (!recordings.length) throw new Error('No results found. Try a different search.');

        el.innerHTML = `<div class="music-results">
            ${recordings.map((rec, i) => {
                const artist = rec['artist-credit']?.[0]?.artist?.name || 'Unknown Artist';
                const title  = rec.title || 'Untitled';
                const tags   = (rec.tags || []).slice(0, 3);
                const year   = rec['first-release-date']?.slice(0, 4) || '';
                return `<div class="music-item">
                    <div class="music-num">${i + 1}</div>
                    <div class="music-info">
                        <div class="music-title">${title}</div>
                        <div class="music-artist">${artist}</div>
                        ${tags.length ? `<div class="music-tags">${tags.map(t => `<span class="music-tag">${t.name}</span>`).join('')}</div>` : ''}
                    </div>
                    <div class="music-year">${year}</div>
                </div>`;
            }).join('')}
        </div>`;
    } catch (e) {
        el.innerHTML = `<div class="err-box">‚ùå ${e.message}</div>`;
    }
}

// ============================================================
//   5. TRIVIA ‚Äî Open Trivia DB (free, no key)
//   Fixed: HTML entity decoding + safe option rendering
// ============================================================
let triviaAnswer = '';

async function fetchTrivia() {
    const el = document.getElementById('triviaOut');
    el.innerHTML = '<div class="load-box"><div class="spn"></div>Loading trivia‚Ä¶</div>';
    try {
        const r = await fetch('https://opentdb.com/api.php?amount=1&type=multiple&encode=url3986');
        if (!r.ok) throw new Error(`Trivia API error ${r.status}`);
        const d = await r.json();
        if (d.response_code !== 0) throw new Error('Trivia API returned no results. Try again.');

        const q = d.results[0];
        // Decode percent-encoded strings (url3986 encoding avoids HTML entity issues)
        const decode = s => decodeURIComponent(s);

        triviaAnswer = decode(q.correct_answer);
        const allOpts = [...q.incorrect_answers.map(decode), triviaAnswer]
            .sort(() => Math.random() - 0.5);

        el.innerHTML = `<div class="trivia-body">
            <div class="trivia-cat">${decode(q.category)}</div>
            <div class="trivia-question">${decode(q.question)}</div>
            <div class="trivia-options" id="trivOpts">
                ${allOpts.map((opt, i) =>
                    `<button class="trivia-opt" data-opt="${i}" onclick="checkTrivia(this)">${opt}</button>`
                ).join('')}
            </div>
            <div class="trivia-result" id="triviaResult"></div>
        </div>`;

        // Store answers on buttons as data attributes (avoids escaping issues in onclick)
        allOpts.forEach((opt, i) => {
            document.querySelector(`[data-opt="${i}"]`).dataset.value = opt;
        });

    } catch (e) {
        el.innerHTML = `<div class="err-box">‚ùå ${e.message}</div>`;
    }
}

function checkTrivia(btn) {
    const chosen = btn.dataset.value;
    document.querySelectorAll('.trivia-opt').forEach(b => b.disabled = true);
    const res = document.getElementById('triviaResult');
    if (chosen === triviaAnswer) {
        btn.classList.add('correct');
        res.innerHTML = '‚úÖ Correct! Well done!';
    } else {
        btn.classList.add('wrong');
        document.querySelectorAll('.trivia-opt').forEach(b => {
            if (b.dataset.value === triviaAnswer) b.classList.add('correct');
        });
        res.innerHTML = `‚ùå Wrong! The answer was: <strong>${triviaAnswer}</strong>`;
    }
    res.classList.add('show');
}

// ============================================================
//   6. SPACE ‚Äî SpaceX v4 API (free, no key needed)
//   Fixed: correct endpoint with proper query params
// ============================================================
async function fetchSpace() {
    const el = document.getElementById('spaceOut');
    el.innerHTML = '<div class="load-box"><div class="spn"></div>Loading space events‚Ä¶</div>';
    try {
        // Use POST query to get latest launches sorted by date descending
        const r = await fetch('https://api.spacexdata.com/v4/launches/query', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                query: {},
                options: {
                    sort: { date_utc: 'desc' },
                    limit: 10
                }
            })
        });
        if (!r.ok) throw new Error(`SpaceX API error ${r.status}`);
        const data = await r.json();
        const launches = data.docs || [];
        if (!launches.length) throw new Error('No launch data returned.');

        const now = new Date();
        el.innerHTML = `<div class="space-list">
            ${launches.map(l => {
                const dt = new Date(l.date_utc);
                const isUpcoming = dt > now;
                const day = dt.getDate();
                const mon = dt.toLocaleString('en', { month: 'short' });
                const year = dt.getFullYear();
                return `<div class="space-item">
                    <div class="space-date">
                        <div class="sd-day">${day}</div>
                        <div class="sd-mon">${mon} ${year}</div>
                    </div>
                    <div class="space-info">
                        <div class="space-name">${l.name}</div>
                        <div class="space-desc">${l.details || 'No details available for this launch.'}</div>
                    </div>
                    <div class="space-status ${isUpcoming ? 'upcoming' : 'past'}">${isUpcoming ? 'Upcoming' : 'Completed'}</div>
                </div>`;
            }).join('')}
        </div>`;
    } catch (e) {
        el.innerHTML = `<div class="err-box">‚ùå ${e.message}</div>`;
    }
}

// ============================================================
//   7. COMICS ‚Äî Curated static database with search filter
//   (ComicVine requires a paid API key + server-side proxy;
//    replaced with a comprehensive local dataset that actually works)
// ============================================================
const COMICS_DB = [
    { name:'Batman',         first:'Detective Comics #27',    year:'1939', publisher:'DC',     emoji:'ü¶á' },
    { name:'Superman',       first:'Action Comics #1',        year:'1938', publisher:'DC',     emoji:'üîµ' },
    { name:'Wonder Woman',   first:'All Star Comics #8',      year:'1941', publisher:'DC',     emoji:'‚ö°' },
    { name:'The Flash',      first:'Showcase #4',             year:'1956', publisher:'DC',     emoji:'‚ö°' },
    { name:'Green Lantern',  first:'Showcase #22',            year:'1959', publisher:'DC',     emoji:'üíö' },
    { name:'Aquaman',        first:'More Fun Comics #73',     year:'1941', publisher:'DC',     emoji:'üåä' },
    { name:'Cyborg',         first:'DC Comics Presents #26',  year:'1980', publisher:'DC',     emoji:'ü§ñ' },
    { name:'Green Arrow',    first:"More Fun Comics #73",     year:'1941', publisher:'DC',     emoji:'üèπ' },
    { name:'Spider-Man',     first:'Amazing Fantasy #15',     year:'1962', publisher:'Marvel', emoji:'üï∑Ô∏è' },
    { name:'Iron Man',       first:'Tales of Suspense #39',   year:'1963', publisher:'Marvel', emoji:'üî¥' },
    { name:'Captain America',first:'Captain America Comics #1',year:'1941',publisher:'Marvel', emoji:'üõ°Ô∏è' },
    { name:'Thor',           first:'Journey into Mystery #83', year:'1962', publisher:'Marvel', emoji:'‚ö°' },
    { name:'Hulk',           first:'The Incredible Hulk #1',  year:'1962', publisher:'Marvel', emoji:'üíö' },
    { name:'Wolverine',      first:'Incredible Hulk #181',    year:'1974', publisher:'Marvel', emoji:'‚öîÔ∏è' },
    { name:'Black Panther',  first:'Fantastic Four #52',      year:'1966', publisher:'Marvel', emoji:'üêæ' },
    { name:'Doctor Strange', first:'Strange Tales #110',      year:'1963', publisher:'Marvel', emoji:'üîÆ' },
    { name:'Daredevil',      first:'Daredevil #1',            year:'1964', publisher:'Marvel', emoji:'üî¥' },
    { name:'Black Widow',    first:'Tales of Suspense #52',   year:'1964', publisher:'Marvel', emoji:'üï∏Ô∏è' },
    { name:'Deadpool',       first:'New Mutants #98',         year:'1991', publisher:'Marvel', emoji:'üí¨' },
    { name:'Hawkeye',        first:'Tales of Suspense #57',   year:'1964', publisher:'Marvel', emoji:'üéØ' },
    { name:'Ms. Marvel',     first:'Marvel Super-Heroes #13', year:'1968', publisher:'Marvel', emoji:'‚≠ê' },
    { name:'Groot',          first:'Tales to Astonish #13',   year:'1960', publisher:'Marvel', emoji:'üåø' },
    { name:'Star-Lord',      first:'Marvel Preview #4',       year:'1976', publisher:'Marvel', emoji:'üöÄ' },
    { name:'Joker',          first:'Batman #1',               year:'1940', publisher:'DC',     emoji:'üÉè' },
    { name:'Lex Luthor',     first:'Action Comics #23',       year:'1940', publisher:'DC',     emoji:'ü¶∑' },
    { name:'Thanos',         first:'The Invincible Iron Man #55',year:'1973',publisher:'Marvel',emoji:'üü£' },
    { name:'Magneto',        first:'X-Men #1',                year:'1963', publisher:'Marvel', emoji:'üß≤' },
    { name:'Venom',          first:'The Amazing Spider-Man #300',year:'1988',publisher:'Marvel',emoji:'üñ§' },
    { name:'Loki',           first:'Journey into Mystery #85', year:'1962', publisher:'Marvel', emoji:'üêç' },
    { name:'Silver Surfer',  first:'Fantastic Four #48',      year:'1966', publisher:'Marvel', emoji:'üèÑ' },
    { name:'Storm',          first:'Giant-Size X-Men #1',     year:'1975', publisher:'Marvel', emoji:'‚õàÔ∏è' },
    { name:'Cyclops',        first:'X-Men #1',                year:'1963', publisher:'Marvel', emoji:'üëÅÔ∏è' },
];

function fetchComics() {
    const q = document.getElementById('comicIn').value.trim().toLowerCase();
    const el = document.getElementById('comicsOut');

    // Filter database by search query (name or publisher match)
    let results = q
        ? COMICS_DB.filter(c =>
            c.name.toLowerCase().includes(q) ||
            c.publisher.toLowerCase().includes(q) ||
            c.first.toLowerCase().includes(q)
          )
        : COMICS_DB;

    if (!results.length) {
        el.innerHTML = `<div class="err-box">No characters found for "${q}". Try Batman, Spider-Man, or a publisher name.</div>`;
        return;
    }

    // Show up to 8 results
    results = results.slice(0, 8);

    el.innerHTML = `<div class="comics-grid">
        ${results.map(c => `
        <div class="comic-card">
            <div class="cc-img" style="background:linear-gradient(135deg,#1a1a2e,#16213e,#0f3460);">
                <span style="font-size:3.5rem;">${c.emoji}</span>
            </div>
            <div class="cc-body">
                <div class="cc-title">${c.name} <span style="color:#4a4a55;font-size:10px;font-weight:400;">${c.publisher}</span></div>
                <div class="cc-year">First: ${c.first} (${c.year})</div>
            </div>
        </div>`).join('')}
    </div>`;
}

// ============================================================
//   INIT ‚Äî load news on page start
// ============================================================
window.addEventListener('load', () => {
    loaded['news'] = true;
    fetchNews();
});
</script>
</body>
</html>